<!DOCTYPE html>
<html>
<script src='https://d3js.org/d3.v5.min.js'></script>
<head>
	<title>etf details</title>
</head>
<body onload = 'init()'>
	<h1 id='h1Title'></h1>
	<div class = 'holdings'>
		<h2 id='h2Title'></h2>
		<svg width=800 height=800>
		</svg><br>	
	</div>

	<script>
		async function init() {
			if (window.location.href.includes('?')) {
				etf = location.search.substring(1).split("&")[0].split('=')[1];
			}
			else {
				etf = 'QQQ';
			}
			const data = await d3.csv("Data/" + etf + 'Holdings.csv');
			document.getElementById("h1Title").innerHTML = etf + " Details";

			var color = ['pink', 'lightcyan', '#f8b70a','lightblue','#6149c6','lightgreen', '#9f8170', 'lightyellow', '#8ABD4A',  'violet'];
			var pie = d3.pie().value(function(d) {return d.PercentOfFund;});
			var arc = d3.arc().innerRadius(150).outerRadius(300);
			d3.select('svg').append('g').attr('transform', 'translate(400,400)').selectAll('path').data(pie(data)).enter().append('path').attr('d', arc).attr('fill', function(d, i){return color[i];});


		}
	</script>
</body>
</html>